<div>
  <div class="row">
    <div class="col-lg-12">
      <%= render 'form' %>
    </div>
  </div>
  <div class = "container">
    <div class="row">
      <%if @time_entries.empty? %>
        <div class="col-lg-12 col-md-offset-5">
          <br>
          <h4> No results </h4>
        </div>
      <% else %>
        <div class="col-lg-9">
          <h3> Time Entries </h3>
          <br>
          <h5><%= "from: #{@start_time.strftime '%d-%m-%Y %H:%M:%S'}" %> </h5>
          <h5><%= "to: #{@end_time.strftime '%d-%m-%Y %H:%M:%S'}" %></h5>
          <br>
          <table summary="TimeEntry list" class="table">
            <tr class="header">
              <th>Time Entry Name</th>
              <th>User</th>
              <th>Project</th>
              <th>Duration</th>
              <th>Start Time</th>
              <th>End Time</th>
            </tr>
            <tbody>
              <% @time_entries.order('updated_at desc').each do |time_entry| %>
                <tr>
                  <td><%= time_entry.name %></td>
                  <td><%= "#{time_entry.user.first_name} #{time_entry.user.last_name}" %></td>
                  <td><%= time_entry.project.try(:name) %></td>
                  <td><%= formatted_duration(time_entry.total_time) %></td>
                  <td><%= time_entry.start_time.strftime("%H:%M:%S %d/%m/%y") %></td>
                  <td><%= time_entry.end_time.strftime("%H:%M:%S %d/%m/%y") %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <div class="col-lg-3">
          <h4><%= "Total Hours: #{formatted_duration(@time_entries.sum(:total_time).to_i)}" %> </h4>
        </div>
      <% end %>
    </div>
  </div>
  <%= link_to 'Export to CSV', reports_path(format: :csv) %>
</div>